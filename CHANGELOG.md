# Changelog

All notable changes to this project will be documented in this file.

## [0.12.0](https://github.com/aschey/stream-download-rs/compare/0.11.2..0.12.0) - 2024-11-14

### Bug Fixes

- *(examples)* Create decoder and sink on the same thread ([#123](https://github.com/aschey/stream-download-rs/pull/123)) - ([5065e78](https://github.com/aschey/stream-download-rs/commit/5065e78e69b808c9106dcedd42cb6a86648afa60))
- Fix race condition when reporting stream errors ([#127](https://github.com/aschey/stream-download-rs/pull/127)) - ([594d41d](https://github.com/aschey/stream-download-rs/commit/594d41d019cf839d97773c65a222ea1e728da967))

### Dependencies

- *(deps)* Allow reqwest-middleware 0.3.-0.4 ([#130](https://github.com/aschey/stream-download-rs/pull/130)) - ([c0bc067](https://github.com/aschey/stream-download-rs/commit/c0bc067994963fa285c83edfd78d733b4c4e219a))

### Features

- Add setting to cancel stream on drop ([#124](https://github.com/aschey/stream-download-rs/pull/124)) - ([785d54e](https://github.com/aschey/stream-download-rs/commit/785d54e370e9d81dbadc2c1cf7a0528ba84d4911))
- Add stream handle ([#125](https://github.com/aschey/stream-download-rs/pull/125)) - ([6ae481b](https://github.com/aschey/stream-download-rs/commit/6ae481b7dfeadaff712d4297ce42d5b8883364aa))
- [**breaking**] Add SourceStream implementation for AsyncRead ([#126](https://github.com/aschey/stream-download-rs/pull/126)) - ([bac8c64](https://github.com/aschey/stream-download-rs/commit/bac8c6445439d9086b7bf1ba0130042882df7f3a))
- [**breaking**] Add SourceStream implementation for processes ([#128](https://github.com/aschey/stream-download-rs/pull/128)) - ([91f562c](https://github.com/aschey/stream-download-rs/commit/91f562c314d1500d020b6f95813f36dfc90fb692))
- Add yt-dlp command wrappers ([#129](https://github.com/aschey/stream-download-rs/pull/129)) - ([4213bf7](https://github.com/aschey/stream-download-rs/commit/4213bf70bfc6a640226cdb01b1f4660cda9771a7))

### Refactor

- Separate some large source files ([#121](https://github.com/aschey/stream-download-rs/pull/121)) - ([aabbab8](https://github.com/aschey/stream-download-rs/commit/aabbab8aaae078ef0c5979bebf49bc4f6eae8bf8))

<!-- generated by git-cliff -->
## [0.11.2](https://github.com/aschey/stream-download-rs/compare/0.11.1..0.11.2) - 2024-11-09

### Dependencies

- *(deps)* Update rodio requirement from 0.19.0 to 0.20.1 ([#118](https://github.com/aschey/stream-download-rs/pull/118)) - ([2b27b77](https://github.com/aschey/stream-download-rs/commit/2b27b77d7705f24ae148800797ebd12f270adbb6))
- *(deps)* Update thiserror requirement from 1.0.21 to 2.0.1 ([#119](https://github.com/aschey/stream-download-rs/pull/119)) - ([0741fcc](https://github.com/aschey/stream-download-rs/commit/0741fcc96f607ba1d7e62248bbea1e66cb770aaa))

<!-- generated by git-cliff -->
## [0.11.1](https://github.com/aschey/stream-download-rs/compare/0.11.0..0.11.1) - 2024-11-03

### Features

- Add integration with reqwest-middleware ([#116](https://github.com/aschey/stream-download-rs/pull/116)) - ([a2acbb2](https://github.com/aschey/stream-download-rs/commit/a2acbb2fe3d84552bd449f4783f26ae221763b60))

<!-- generated by git-cliff -->
## [0.11.0](https://github.com/aschey/stream-download-rs/compare/0.10.0..0.11.0) - 2024-11-02

### Features

- Return error when the stream is cancelled by the user ([#111](https://github.com/aschey/stream-download-rs/pull/111)) - ([d37e547](https://github.com/aschey/stream-download-rs/commit/d37e547ab48f8af253a0545d91a71166d222a6d8))
- Allow cancelling the stream within a progress callback ([#113](https://github.com/aschey/stream-download-rs/pull/113)) - ([d74ac82](https://github.com/aschey/stream-download-rs/commit/d74ac824fe2126ed1b92461ecd3e1304423e855a))
- Add reconnect callback ([#114](https://github.com/aschey/stream-download-rs/pull/114)) - ([617d6e7](https://github.com/aschey/stream-download-rs/commit/617d6e7453fa42419d26cbaab60f8944a65c8226))

<!-- generated by git-cliff -->
## [0.10.0](https://github.com/aschey/stream-download-rs/compare/0.9.0..0.10.0) - 2024-11-02

### Bug Fixes

- Notify readers on stream failure ([#109](https://github.com/aschey/stream-download-rs/pull/109)) - ([39cd434](https://github.com/aschey/stream-download-rs/commit/39cd4348de2fd26902e163baddb11d8811b23d98))
- Attempt range request even if not explicitly supported ([#110](https://github.com/aschey/stream-download-rs/pull/110)) - ([6a294c5](https://github.com/aschey/stream-download-rs/commit/6a294c5213a3a56ff1d2adc23bf1a139d422435e))

### Dependencies

- *(deps)* Update testcontainers-modules requirement from 0.10.0 to 0.11.1 ([#102](https://github.com/aschey/stream-download-rs/pull/102)) - ([6ca97a3](https://github.com/aschey/stream-download-rs/commit/6ca97a3ecc91bbf5e717a3cf0469a0bbc34b862a))
- *(deps)* Update rstest requirement from 0.22.0 to 0.23.0 ([#105](https://github.com/aschey/stream-download-rs/pull/105)) - ([7af200d](https://github.com/aschey/stream-download-rs/commit/7af200df585a7ff58d7982c1501cee82f893a42e))
- *(deps)* Expand compatible OpenDAL version range ([#106](https://github.com/aschey/stream-download-rs/pull/106)) - ([add3932](https://github.com/aschey/stream-download-rs/commit/add393269551cd3548744f38107ac2b9ef0bbcc6))

### Features

- Error on read or seek when the stream failed to download ([#108](https://github.com/aschey/stream-download-rs/pull/108)) - ([e451153](https://github.com/aschey/stream-download-rs/commit/e4511534503c998901716c6aa0a7d9d196834245))
- Add configurable timeout to retry streams after network failures ([#107](https://github.com/aschey/stream-download-rs/pull/107)) - ([c99bc21](https://github.com/aschey/stream-download-rs/commit/c99bc21f0b4aba40fd8a1f9a1e8119534292a4e1))

<!-- generated by git-cliff -->
## [0.9.0](https://github.com/aschey/stream-download-rs/compare/0.8.0..0.9.0) - 2024-09-21

### Dependencies

- *(deps)* [**breaking**] Update opendal requirement from 0.49 to 0.50 ([#96](https://github.com/aschey/stream-download-rs/pull/96)) - ([092707d](https://github.com/aschey/stream-download-rs/commit/092707d3a486ca05786993639fe76bdba86f071a))
- *(deps)* Update tower-http requirement from 0.5.2 to 0.6.0 ([#97](https://github.com/aschey/stream-download-rs/pull/97)) - ([172f11b](https://github.com/aschey/stream-download-rs/commit/172f11b4f34845b3ab881d1a8f96d83a9d925d5b))

### Miscellaneous Tasks

- Update rustfmt to 2024 edition ([#98](https://github.com/aschey/stream-download-rs/pull/98)) - ([e1c614b](https://github.com/aschey/stream-download-rs/commit/e1c614be2d551f79004ec156bbb72ed1e6c46b54))
- Use repo token for release-plz ([#100](https://github.com/aschey/stream-download-rs/pull/100)) - ([b82f5e3](https://github.com/aschey/stream-download-rs/commit/b82f5e32a16d8235116178bc4c02f44c27331a39))

<!-- generated by git-cliff -->
## [0.8.0](https://github.com/aschey/stream-download-rs/compare/0.7.3..0.8.0) - 2024-09-08

### Bug Fixes

- Apply the correct offset for SeekFrom::End ([#93](https://github.com/aschey/stream-download-rs/pull/93)) - ([b3237d9](https://github.com/aschey/stream-download-rs/commit/b3237d97b4bd700df28b77d6a33561e4343ad91d))

### Features

- Return specific error types when creating a stream ([#91](https://github.com/aschey/stream-download-rs/pull/91)) - ([13fc7ca](https://github.com/aschey/stream-download-rs/commit/13fc7caf8b72154417fae57bb1500fab894fd1de))
- Add backpressure to handle slow readers when using BoundedStorage ([#94](https://github.com/aschey/stream-download-rs/pull/94)) - ([e9f0472](https://github.com/aschey/stream-download-rs/commit/e9f04723d9b0285969f598b9a75083871222592e))

<!-- generated by git-cliff -->
## [0.7.3](https://github.com/aschey/stream-download-rs/compare/0.7.2..0.7.3) - 2024-09-01

### Dependencies

- *(deps)* Update testcontainers-modules requirement from 0.9.0 to 0.10.0 ([#89](https://github.com/aschey/stream-download-rs/pull/89)) - ([5e8dff0](https://github.com/aschey/stream-download-rs/commit/5e8dff0cb22a8796a7cfb3667b3bfd24a5a857a6))
- *(deps)* Update tower requirement from 0.4.13 to 0.5.0 ([#86](https://github.com/aschey/stream-download-rs/pull/86)) - ([be39cd6](https://github.com/aschey/stream-download-rs/commit/be39cd64ad10a4ab22835d2543cbf41437d3eee7))
- *(deps)* Update opendal requirement from 0.48 to 0.49 ([#87](https://github.com/aschey/stream-download-rs/pull/87)) - ([d8e14dc](https://github.com/aschey/stream-download-rs/commit/d8e14dcd360267bc199b1efcb245d0fe0af71b8f))
- *(deps)* Update rstest requirement from 0.21.0 to 0.22.0 ([#88](https://github.com/aschey/stream-download-rs/pull/88)) - ([cc5ba7d](https://github.com/aschey/stream-download-rs/commit/cc5ba7dac32331421761f517d9a4e8ac1417ec2f))

### Documentation

- Fix a few problems with the examples ([#83](https://github.com/aschey/stream-download-rs/pull/83)) - ([d56e621](https://github.com/aschey/stream-download-rs/commit/d56e6214a95b621e74b59cebdde49ebcf0b49c20))

### Miscellaneous Tasks

- Bump EmbarkStudios/cargo-deny-action from 1 to 2 ([#85](https://github.com/aschey/stream-download-rs/pull/85)) - ([657fc21](https://github.com/aschey/stream-download-rs/commit/657fc217246db1ca93ef3b363fef36a7323a0abe))

<!-- generated by git-cliff -->
## [0.7.2](https://github.com/aschey/stream-download-rs/compare/0.7.1..0.7.2) - 2024-08-14

### Features

- Add method to get the stream cancellation token ([#80](https://github.com/aschey/stream-download-rs/pull/80)) - ([452239f](https://github.com/aschey/stream-download-rs/commit/452239f1500c67de5aa90c093397c6fa352c56a7))

<!-- generated by git-cliff -->
## [0.7.1](https://github.com/aschey/stream-download-rs/compare/0.7.0..0.7.1) - 2024-08-02

### Dependencies

- *(deps)* Update opendal requirement from 0.47 to 0.48 ([#77](https://github.com/aschey/stream-download-rs/pull/77)) - ([bb35f63](https://github.com/aschey/stream-download-rs/commit/bb35f63bec85a1b846897804f0220503be04b554))
- *(deps)* Update testcontainers-modules requirement from 0.8.0 to 0.9.0 ([#78](https://github.com/aschey/stream-download-rs/pull/78)) - ([c30d9a1](https://github.com/aschey/stream-download-rs/commit/c30d9a1406eac1031764080dea4935cb3388753d))

<!-- generated by git-cliff -->
## [0.7.0](https://github.com/aschey/stream-download-rs/compare/0.6.0..0.7.0) - 2024-07-28

### Bug Fixes

- Don't pass in RUSTFLAGS when checking docs ([#67](https://github.com/aschey/stream-download-rs/pull/67)) - ([ecfdb0a](https://github.com/aschey/stream-download-rs/commit/ecfdb0adc591711f67e51ee50fc5780cf1e972ed))

### Documentation

- Mention icy-metadata ([#69](https://github.com/aschey/stream-download-rs/pull/69)) - ([4b3c7cd](https://github.com/aschey/stream-download-rs/commit/4b3c7cd067ac373058d9f2d22b5051c326a302c3))

### Features

- Add OpenDAL transport ([#73](https://github.com/aschey/stream-download-rs/pull/73)) - ([c6e0e90](https://github.com/aschey/stream-download-rs/commit/c6e0e90e4b149c5baa4dba788278a7ac65ce82c1))

### Miscellaneous Tasks

- Only check direct minimal versions ([#74](https://github.com/aschey/stream-download-rs/pull/74)) - ([6e5d5d9](https://github.com/aschey/stream-download-rs/commit/6e5d5d9b709a52275d8bd6269007a1564dbfe0c0))
- Update cargo-deny config ([#75](https://github.com/aschey/stream-download-rs/pull/75)) - ([71d5040](https://github.com/aschey/stream-download-rs/commit/71d504006adcad4b4c27bb6c3a883034305b39a6))

<!-- generated by git-cliff -->
## [0.6.0](https://github.com/aschey/stream-download-rs/compare/0.5.2..0.6.0) - 2024-07-06

### Bug Fixes

- Don't enable rustls for docs build ([#64](https://github.com/aschey/stream-download-rs/pull/64)) - ([f292373](https://github.com/aschey/stream-download-rs/commit/f2923730de71a70da20cf03d203b397e00ace5a7))

### Dependencies

- *(deps)* Update rstest requirement from 0.18.2 to 0.19.0 ([#56](https://github.com/aschey/stream-download-rs/pull/56)) - ([5c2a08e](https://github.com/aschey/stream-download-rs/commit/5c2a08ecca6448948ef074f735dc8ba519a36414))
- *(deps)* Update rstest requirement from 0.19.0 to 0.20.0 ([#60](https://github.com/aschey/stream-download-rs/pull/60)) - ([3a6666c](https://github.com/aschey/stream-download-rs/commit/3a6666cc4743e353e760757ca6e8c49a001abf72))
- *(deps)* Update rodio requirement from 0.17.3 to 0.18.1 ([#59](https://github.com/aschey/stream-download-rs/pull/59)) - ([b4d6399](https://github.com/aschey/stream-download-rs/commit/b4d63990141f3acf583e2a4c5c6fe4bf6c3c56b8))
- *(deps)* Update rodio requirement from 0.18.1 to 0.19.0 ([#63](https://github.com/aschey/stream-download-rs/pull/63)) - ([4650daf](https://github.com/aschey/stream-download-rs/commit/4650daf5513f59d0a4e869497286c143c7c8877f))
- *(deps)* Update rstest requirement from 0.20.0 to 0.21.0 ([#62](https://github.com/aschey/stream-download-rs/pull/62)) - ([ceb197b](https://github.com/aschey/stream-download-rs/commit/ceb197b192e4adf663fd43d1095a84990ee8de92))

### Features

- Add utility function for creating custom clients ([#52](https://github.com/aschey/stream-download-rs/pull/52)) - ([a305f7f](https://github.com/aschey/stream-download-rs/commit/a305f7f4a215c09f3679f92ea9635ddd276f4437))
- Add stream progress callback ([#65](https://github.com/aschey/stream-download-rs/pull/65)) - ([8c81a1b](https://github.com/aschey/stream-download-rs/commit/8c81a1bcacf2350211c7240c3da524b1ccf5bf01))
- Restart prefetch when seeking into a missing section ([#66](https://github.com/aschey/stream-download-rs/pull/66)) - ([cd11c47](https://github.com/aschey/stream-download-rs/commit/cd11c478afa9a5ee54556d30fb16d3fd6a961e51))

### Miscellaneous Tasks

- Remove committed action ([#53](https://github.com/aschey/stream-download-rs/pull/53)) - ([b01a292](https://github.com/aschey/stream-download-rs/commit/b01a292f26cb134aca351f409ba0b8fde9fbd2bd))
- Add additional clippy lints ([#55](https://github.com/aschey/stream-download-rs/pull/55)) - ([1ab82f9](https://github.com/aschey/stream-download-rs/commit/1ab82f91aceca992818395d58f899ec2121a4882))
- Increase test threads ([#57](https://github.com/aschey/stream-download-rs/pull/57)) - ([f1ebdf4](https://github.com/aschey/stream-download-rs/commit/f1ebdf46e655664b1bf3f8cc9f0dc259d5b26f8b))

<!-- generated by git-cliff -->
## [0.5.2](https://github.com/aschey/stream-download-rs/compare/0.5.1..0.5.2) - 2024-04-04

### Bug Fixes

- Handle error statuses from http requests ([#50](https://github.com/aschey/stream-download-rs/pull/50)) - ([a4ec987](https://github.com/aschey/stream-download-rs/commit/a4ec98739d114df2e7c37cd7679e02f61fdadb1f))

<!-- generated by git-cliff -->
## [0.5.1](https://github.com/aschey/stream-download-rs/compare/0.5.0..0.5.1) - 2024-03-31

### Bug Fixes

- Only log appropriate seek errors ([#49](https://github.com/aschey/stream-download-rs/pull/49)) - ([b6a900c](https://github.com/aschey/stream-download-rs/commit/b6a900cde093cab486fd886e45a3ca58d9862645))

### Features

- Use native async traits ([#45](https://github.com/aschey/stream-download-rs/pull/45)) - ([3c61e78](https://github.com/aschey/stream-download-rs/commit/3c61e78e0c475688f085d504eaf1e1533df835c9))
- Make seek buffer size configurable ([#48](https://github.com/aschey/stream-download-rs/pull/48)) - ([42783d6](https://github.com/aschey/stream-download-rs/commit/42783d6294f6d6419e04f65d2aac68090412e685))

### Miscellaneous Tasks

- Update reqwest to 0.12 ([#46](https://github.com/aschey/stream-download-rs/pull/46)) - ([ed75e88](https://github.com/aschey/stream-download-rs/commit/ed75e880a89b89bc780fdf1894c1bec228ccb686))

<!-- generated by git-cliff -->
## [0.5.0](https://github.com/aschey/stream-download-rs/compare/0.4.2..0.5.0) - 2024-03-20

### Features

- *(storage)* Make tempfile more configurable ([#42](https://github.com/aschey/stream-download-rs/pull/42)) - ([c71de8b](https://github.com/aschey/stream-download-rs/commit/c71de8baeceafa0a43ec5b953741a24f1ac73888))

### Miscellaneous Tasks

- Update dev-dependencies - ([d42514e](https://github.com/aschey/stream-download-rs/commit/d42514e11a70ebd4f39dee90e2fb59c1d1b3e22b))

<!-- generated by git-cliff -->
## [0.4.2](https://github.com/aschey/stream-download-rs/compare/0.4.1..0.4.2) - 2024-02-10

### Bug Fixes

- Use proper buffer size with BoundedStorageProvider when content length is known ([#37](https://github.com/aschey/stream-download-rs/pull/37)) - ([66182d8](https://github.com/aschey/stream-download-rs/commit/66182d8c5ee02f3c889cb1076f9f717838a23ae6))
- Ensure content length fits within the requested buffer ([#39](https://github.com/aschey/stream-download-rs/pull/39)) - ([6a15e94](https://github.com/aschey/stream-download-rs/commit/6a15e94ace9d26e489adf676c7d2ad3f919f9ed6))

<!-- generated by git-cliff -->
## [0.4.1](https://github.com/aschey/stream-download-rs/compare/0.4.0..0.4.1) - 2024-02-08

### Bug Fixes

- Fix release build ([#34](https://github.com/aschey/stream-download-rs/pull/34)) - ([8cc3163](https://github.com/aschey/stream-download-rs/commit/8cc31632f9783fa6fbe783b2ec1b7adda8e23b93))

<!-- generated by git-cliff -->
## [0.4.0] - 2023-12-03

### Bug Fixes

- Set correct msrv in package metadata - ([5760cfe](https://github.com/aschey/stream-download-rs/commit/5760cfec8509cfb7c74b42c484791b69c703bc4b))

### Miscellaneous Tasks

- Fix msrv check - ([9f7e632](https://github.com/aschey/stream-download-rs/commit/9f7e63220c9f37ffa9f5ef5aee4a38dd3bcc5a3f))
- Update git cliff config - ([4feca94](https://github.com/aschey/stream-download-rs/commit/4feca948fd8bc57ae555fb407b45540d505208dd))
- Relax committed lints ([#16](https://github.com/aschey/stream-download-rs/pull/16)) - ([d4884df](https://github.com/aschey/stream-download-rs/commit/d4884dfd0ee6671577b880cef78982ec4b038d90))
- Run clippy on examples ([#22](https://github.com/aschey/stream-download-rs/pull/22)) - ([3501cd1](https://github.com/aschey/stream-download-rs/commit/3501cd1f45315ef0862fa195a4bd52494ec31c8d))
- Bump actions/checkout from 3 to 4 ([#28](https://github.com/aschey/stream-download-rs/pull/28)) - ([68a8b3d](https://github.com/aschey/stream-download-rs/commit/68a8b3d0156fc38282f6f4a1417ce025299a4218))
- Only package rust files - ([613861f](https://github.com/aschey/stream-download-rs/commit/613861f5bb30f8b8eeba2c6d25ba35689d2430b0))

### Refactor

- Reader and writer creation now one method ([#14](https://github.com/aschey/stream-download-rs/pull/14)) - ([aca2585](https://github.com/aschey/stream-download-rs/commit/aca2585718aedefa3f917c7494d72320b735753d))
- Refactor stream internals ([#32](https://github.com/aschey/stream-download-rs/pull/32)) - ([b4d84b5](https://github.com/aschey/stream-download-rs/commit/b4d84b50296b84b3e9ae7e3ba56c252495bb92c9))

### Testing

- Fix panic in test stream ([#21](https://github.com/aschey/stream-download-rs/pull/21)) - ([90ca324](https://github.com/aschey/stream-download-rs/commit/90ca324247c018c620f21fc83d45b3778117cdd1))
- Use axum as file server ([#31](https://github.com/aschey/stream-download-rs/pull/31)) - ([44ffe20](https://github.com/aschey/stream-download-rs/commit/44ffe20b7153fb71bd3e1fcf7ff478df017ff6a0))

<!-- generated by git-cliff -->
## [0.3.0] - 2023-09-05

### Features

- *(storage)* Make tempfile storage optional
- *(storage)* [**breaking**] Make storage configurable

### Miscellaneous Tasks

-  Scrape doc examples
-  Update toolchain
-  Simplify doc links and add feature labels

### Refactor

- *(http)* [**breaking**] Move reqwest module inside the http module

<!-- generated by git-cliff -->
## [0.2.0] - 2023-08-17

### Bug Fixes

- *(http)* Return default error if one is not provided

### Features

- *(http)* [**breaking**] Expose stream content type and headers

### Miscellaneous Tasks

-  Update git-cliff commit parsers
-  Check for github actions updates
-  Update ci triggers
-  Update git-cliff changelog format
-  Add dependabot config
-  Add additional rustfmt settings
-  Add conventional commit checks
-  Add git cliff configuration
-  Add release-plz

<!-- generated by git-cliff -->
